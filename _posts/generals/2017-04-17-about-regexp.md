---
layout: post
title: About Regexp
categories: [Regexp]
description: Something you cannot skip.
keywords: Regexp
---
## 说明

本文基于[**正则表达式30分钟入门教程**](http://deerchao.net/tutorials/regex/regex.htm)，增加了一些自己的理解。

## 正则表达式

### 定义

在编写处理字符串的程序或网页时，经常会有查找符合某些复杂规则的字符串的需要。**正则表达式**就是用于描述这些规则的工具。换句话说，正则表达式就是记录文本规则的代码。

### 通配符

Windows系统中`?``*`可以用于查找文档，这个叫做通配符。

### 元字符

| 代码        | 说明           |
|:-------------:|:-------------:|
| .      | 匹配除换行符\t以外的任意字符 |
| \w     | 匹配字母或数字或下划线(或汉字, .net专有)      |
| \s     | 匹配任意的空白符(任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格)     |
| \d     | 匹配数字|
| \b     | 匹配单词的开始或结束      |
| ^      | 匹配字符串的开始      |
| $      | 匹配字符串的结束      |

### 字符转义

有特殊意义的字符需要转义，包括但不局限于`.`、`*`、`\`。

### 重复

|代码|说明|
|:---:|:---:|
|*|重复零次或更多次|
|+|重复一次或更多次|
|?|重复零次或一次|
|{n}|重复n次|
|{n,}|重复n次或更多次|
|{n,m}|重复n到m次|

### 字符类

用`[]`框起来，比如`[aeiou]`表示元音字母、`[.?!]`表示标点符号。

### 分支条件

用`|`隔开不同的规则。

### 分組

用`()`框起来进行重复字符之类的限定。

以下是一個利用了分组和分支条件的例子（匹配有效IP）
{% highlight regex %}
/^((2[0-4]\d|25[0-5]|1\d{2}|[1-9]\d|[1-9])\.){3}(2[0-4]\d|25[0-5]|1\d{2}|[1-9]\d|[1-9])$/
{% endhighlight %}

### 反义

用于查找不属于某个某些字符类的字符。

|代码|说明|
|:---:|:---:|
|\W|匹配任意不是字母，数字，下划线，汉字(.net)的字符|
|\S|匹配任意不是空白符的字符(任意的空白符，包括空格，制表符(Tab)，换行符，中文全角空格)|
|\D|匹配任意非数字的字符|
|\B|匹配不是单词开头或结束的位置|
|[^x]|匹配除了x以外的任意字符|
|[^aeiou]|匹配除了aeiou这几个字母以外的任意字符|

例如，`\S+`匹配不含空白字符的字符串，`<a[^>]+>`匹配尖括号括起来的以a开头的字符串。

### 后向引用

使用小括号指定一个子表达式之后，这个分组会自动拥有一个**组号**，规则为从左向右，以分组的左括号为标志，第一个出现的为1，第二个为2，以此类推。

用反斜线加组号表示引用此组，如`\1`。

这样，匹配有效IP的例子就可以缩减如下
{% highlight regex %}
/^((2[0-4]\d|25[0-5]|1\d{2}|[1-9]\d|[1-9])\.){3}\2$/
{% endhighlight %}

类似，我们可以指定分组的组名。使用这样的语法`(?<Word>\w+)`或者把尖括号换成引号`(?'Word'\w+)`，这样就把组名称指定为`Word`了，可以用`\k<Word>`或者`\k'Word'`。

ps，组名在javascript中不可用。

另外一种，`(?:exp)`不改变正则表达式的处理方式，不捕获到某个组里面，不分配组号。引用[正则表达式中的(?:exp)这样匹配表达式，有什么意义](http://blog.csdn.net/jacketinsysu/article/details/38639701)，作用一般来说是为了节省资源，提高效率。

|代码|说明|
|:--------:|:---:|
|(exp)|匹配exp,并捕获文本到自动命名的组里|
|(?\<name\>exp)|匹配exp,并捕获文本到名称为name的组里，也可以写成(?'name'exp)|
|(?:exp)|匹配exp,不捕获匹配的文本，也不给此分组分配组号|

### 零宽断言

